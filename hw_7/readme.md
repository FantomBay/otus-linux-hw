# Загрузка системы
## Домашнее задание
1. Попасть в систему без пароля несколькими способами.
2. Установить систему с LVM, после чего переименовать VG.
3. Добавить модуль в initrd.
4. *Сконфигурировать систему без отдельного раздела с /boot, а только с LVM Репозиторий с пропатченым grub: https://yum.rumyantsev.com/centos/7/x86_64/ PV необходимо инициализировать с параметром --bootloaderareasize 1m

---
### 1. Попасть в систему без пароля несколькими способами.

1. способ:  

Перезапускаешь машину, уходишь в grub, в меню выбора ядра для загрузки, на первом пункте нажимаем -e- (edit).
 
Ищем строку с параметрами ядра linux, в конце этой строки пишем ```rd.break```
 
потом  ctrl+x - идет перезагрузка...

Проваливаешься в shell  

Делаешь каталог с временным корнем доступным на запись
```
mount -o remount,rw /sysroot
``` 

Переходим с временного корня на настояций:
```
chroot /sysroot 
```

Меняем пароль пользователю root:
```
passwd 
```

*Если selinux включён, нужно создать файл .autorelabel в корне:
```
touch /.autorelabel
```
если не включён, можно сразу делать exit - exit


>*если после перезагрузки контекст не востановился то перезагружаемся и идем опять править строку с параметрами запуска - в конце строки с параметрами ядра добавляем autorelabel=1
и перезагружаемся - контекст должен переустановиться
после еще раз перезагружаемся


* 2 способ  

В строке с параметрами ядра заменяем __ro__ (ReadOnly) на __rw__ (ReadWrite) так же после дописываем 
```
init=/bin/bash 
```
так вместо системы инициализации запуститься оболочка bash 
после нажимаем -ctrl+x-
su -  -это нужно что бы прогрузилось окружение пользователя
```
load_policy -i /etc/selinux/targeted/policy/policy...<tab>
``` 
-этот шаг нужен на системах где cтоит selinux, она загрузит политики
passwd -поменять пароль root пользователю.