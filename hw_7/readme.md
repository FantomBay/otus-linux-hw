# Загрузка системы
## Домашнее задание
1. Попасть в систему без пароля несколькими способами.
2. Установить систему с LVM, после чего переименовать VG.
3. Добавить модуль в initrd.
4. *Сконфигурировать систему без отдельного раздела с /boot, а только с LVM Репозиторий с пропатченым grub: https://yum.rumyantsev.com/centos/7/x86_64/ PV необходимо инициализировать с параметром --bootloaderareasize 1m

---
### 1. Попасть в систему без пароля несколькими способами.
---
1. способ:  

Перезапускаешь машину, уходишь в grub, в меню выбора ядра для загрузки, на первом пункте нажимаем -e- (edit).
 ![](./res_pas_png/1.1.png)
Ищем строку с параметрами ядра linux, в конце этой строки пишем ```rd.break``` (опционально убираем quiet):
 
![](./res_pas_png/1.2.png)
потом  ctrl+x - идет перезагрузка...  
Пропадаем в shell:  
![](./res_pas_png/1.3.png)
Смотрим список примонтированных ФС командой ```mount```,  ищем .```/sysroot```, видим что он _ro_ (read only), перемонтируем его и делаем доступным на запись _rw_ (read write): *(см.скрин. ниже)*
```
mount -o remount,rw /sysroot/
``` 
\*проверим как примонтировалось ```mount -t```(ro-ReadOnly сменилось на rw-ReadWrite) .  

Заходим в образ системы ```/sysroot/```:
```
chroot /sysroot/ 
```

Меняем пароль пользователю ```root```:
```
passwd 
```

*Если selinux включён, нужно создать файл ```.autorelabel``` в корне ```/```:
```
touch /.autorelabel
```
если не включён, можно сразу делать exit, exit.
selinux востановит контекст и перезагрузит систему
![](./res_pas_png/1.4.png)


>*если после перезагрузки контекст не востановился то перезагружаемся и идем опять править строку с параметрами запуска - в конце строки с параметрами ядра добавляем autorelabel=1
и перезагружаемся - контекст должен переустановиться
после еще раз перезагрузится и загрузит систему

Ура!
![](./res_pas_png/1.5.png)

---
* 2 способ  

В строке с параметрами ядра заменяем __ro__ (ReadOnly) на __rw__ (ReadWrite) так же после дописываем 
```
init=/bin/bash 
```
так вместо системы инициализации запуститься оболочка bash.   

После нажимаем -ctrl+x-
![](./res_pas_png/2.1.png)

Прогрузим окружени пользователя ($PATH):
```
su - 
```
на системах где включен selinux:
```
load_policy -i /etc/selinux/targeted/policy/policy...<tab>
``` 
Меняем пароль root пользователю:
```
passwd 
```

После перезагружаемся через меню VirtualBox (Машина > перезапустить).

---

### 2. Установить систему с LVM, после чего переименовать VG.

